<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Graph Visualization and Management</title>
    <!-- Load Bootstrap CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Load Cytoscape from a CDN -->
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <!-- Load the bundled fcose layout plugin -->
    <script src="/static/js/cytoscape-fcose.bundle.js"></script>
    <script>
      if (typeof cytoscapeFcose !== 'undefined') {
          cytoscape.use(cytoscapeFcose);
      } else {
          console.error("cytoscapeFcose is not defined. Ensure that the fcose bundle is loaded correctly.");
      }
    </script>
    <script type="module" src="/static/js/main.js"></script>
  </head>
  <body>
    <div class="container my-3">
      <h1>Graph Visualization and Management</h1>
      <div class="mb-3">
         <button id="add-node-btn" class="btn btn-primary">Add Node</button>
         <button id="add-edge-btn" class="btn btn-secondary">Add Edge</button>
         <button id="remove-selected-btn" class="btn btn-danger">Remove Selected</button>
      </div>
    </div>
    <!-- Graph Container -->
    <div id="cy" style="width: 100%; height: 600px; border: 1px solid #ccc;"></div>
    
    <!-- Add Node Modal -->
    <div class="modal fade" id="addNodeModal" tabindex="-1" aria-labelledby="addNodeModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 id="addNodeModalLabel" class="modal-title">Add Node</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="add-node-form">
              <div class="mb-3">
                <label for="node-id" class="form-label">Node ID</label>
                <input type="text" class="form-control" id="node-id" required>
              </div>
              <div class="mb-3">
                <label for="node-label" class="form-label">Node Label</label>
                <input type="text" class="form-control" id="node-label">
              </div>
              <div class="mb-3">
                <label for="node-position" class="form-label">Initial Position (x,y)</label>
                <input type="text" class="form-control" id="node-position" placeholder="e.g., 100,100">
                <div class="form-text">Leave blank to position automatically.</div>
              </div>
              <button type="submit" class="btn btn-primary">Add Node</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Add Edge Modal -->
    <div class="modal fade" id="addEdgeModal" tabindex="-1" aria-labelledby="addEdgeModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 id="addEdgeModalLabel" class="modal-title">Add Edge</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="add-edge-form">
              <div class="mb-3">
                <label for="edge-id" class="form-label">Edge ID</label>
                <input type="text" class="form-control" id="edge-id" required>
              </div>
              <div class="mb-3">
                <label for="edge-source" class="form-label">Source Node ID</label>
                <select id="edge-source-select" class="form-control"></select>
              </div>
              <div class="mb-3">
                <label for="edge-target" class="form-label">Target Node ID</label>
                <select id="edge-target-select" class="form-control"></select>
              </div>
              <button type="submit" class="btn btn-secondary">Add Edge</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Graph Initialization and Management Script -->
    <script src="/static/js/graph.js"></script>
  </body>
</html>